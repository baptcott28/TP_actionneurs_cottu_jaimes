\hypertarget{main_8c}{}\doxysection{Core/\+Src/main.c File Reference}
\label{main_8c}\index{Core/Src/main.c@{Core/Src/main.c}}


\+: Main program body  


{\ttfamily \#include \char`\"{}main.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include \char`\"{}motor\+\_\+cmd.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{main_8c_a05f5d709605c6317c97e4974bec3402a}\label{main_8c_a05f5d709605c6317c97e4974bec3402a}} 
\#define {\bfseries UART\+\_\+\+TX\+\_\+\+BUFFER\+\_\+\+SIZE}~64
\begin{DoxyCompactList}\small\item\em Taille du buffer de transmission UART. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a5bdd6772c246436bb14377095de79b31}\label{main_8c_a5bdd6772c246436bb14377095de79b31}} 
\#define {\bfseries UART\+\_\+\+RX\+\_\+\+BUFFER\+\_\+\+SIZE}~1
\begin{DoxyCompactList}\small\item\em Taille du buffer de reception (traité sur interruption donc caractère par caractère. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a8a0465f8e8bbe71e4d6e8011e975bf75}\label{main_8c_a8a0465f8e8bbe71e4d6e8011e975bf75}} 
\#define {\bfseries CMD\+\_\+\+BUFFER\+\_\+\+SIZE}~64
\begin{DoxyCompactList}\small\item\em Taille du buffer de commandes. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_aca3b498f5936dbe4f3076a47c3e1810d}\label{main_8c_aca3b498f5936dbe4f3076a47c3e1810d}} 
\#define {\bfseries ASCII\+\_\+\+LF}~0x0A
\begin{DoxyCompactList}\small\item\em Code ASCII du saut de ligne. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a089ed4925403ab02a05e603967c74579}\label{main_8c_a089ed4925403ab02a05e603967c74579}} 
\#define {\bfseries ASCII\+\_\+\+CR}~0x0D
\begin{DoxyCompactList}\small\item\em Code ASCII du retour chariot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a3bb28e223b7c203113dc8c0387d43b36}\label{main_8c_a3bb28e223b7c203113dc8c0387d43b36}} 
\#define {\bfseries ASCII\+\_\+\+DEL}~0x7F
\begin{DoxyCompactList}\small\item\em Code ASCII du caractère DEL. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a29b7451465deac204c5f7cb1f9c6e1fc}\label{main_8c_a29b7451465deac204c5f7cb1f9c6e1fc}} 
\#define {\bfseries MAX\+\_\+\+ARGS}~9
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{main_8c_a70af21c671abfcc773614a9a4f63d920}\label{main_8c_a70af21c671abfcc773614a9a4f63d920}} 
void {\bfseries System\+Clock\+\_\+\+Config} (void)
\item 
int \mbox{\hyperlink{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}} (void)
\begin{DoxyCompactList}\small\item\em The application entry point. Fonction de gestion de l\textquotesingle{}interface utilisateur \+: gestion du shell et du traitement des commandes. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_ae494a9643f29b87d6d81e5264e60e57b}\label{main_8c_ae494a9643f29b87d6d81e5264e60e57b}} 
void {\bfseries HAL\+\_\+\+UART\+\_\+\+Rx\+Cplt\+Callback} (UART\+\_\+\+Handle\+Type\+Def $\ast$huart)
\begin{DoxyCompactList}\small\item\em Gestion des interruptions des périphériques UART\+: Met le flag de réception a 1 et met le caractère reçu dans uart\+Rx\+Buffer. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a1730ffe1e560465665eb47d9264826f9}\label{main_8c_a1730ffe1e560465665eb47d9264826f9}} 
void {\bfseries Error\+\_\+\+Handler} (void)
\item 
\mbox{\Hypertarget{main_8c_a8a3b0ad512a6e6c6157440b68d395eac}\label{main_8c_a8a3b0ad512a6e6c6157440b68d395eac}} 
void {\bfseries HAL\+\_\+\+TIM\+\_\+\+Period\+Elapsed\+Callback} (TIM\+\_\+\+Handle\+Type\+Def $\ast$htim)
\begin{DoxyCompactList}\small\item\em Gestion des interruptions des timers \+: Désactive le timer 2 et remet la Pin ISO\+\_\+\+RESET lorsque le tim2 déclenche son interruption. Termine la séquence d\textquotesingle{}allumage en démarrant les PWM. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a0cd91fd3a9608559c2a87a8ba6cba55f}\label{main_8c_a0cd91fd3a9608559c2a87a8ba6cba55f}} 
void {\bfseries HAL\+\_\+\+GPIO\+\_\+\+EXTI\+\_\+\+Callback} (uint16\+\_\+t GPIO\+\_\+\+Pin)
\begin{DoxyCompactList}\small\item\em Gestion des interruptions GPÏ\+O\+\_\+\+EXTI \+: Déclenche la procédure d\textquotesingle{}allumage du moteur sur appui du bouton utilisateur. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{main_8c_a25fc663547539bc49fecc0011bd76ab5}\label{main_8c_a25fc663547539bc49fecc0011bd76ab5}} 
TIM\+\_\+\+Handle\+Type\+Def {\bfseries htim1}
\item 
\mbox{\Hypertarget{main_8c_a2c80fd5510e2990a59a5c90d745c716c}\label{main_8c_a2c80fd5510e2990a59a5c90d745c716c}} 
TIM\+\_\+\+Handle\+Type\+Def {\bfseries htim2}
\item 
\mbox{\Hypertarget{main_8c_aa9479c261d65eecedd3d9582f7f0f89c}\label{main_8c_aa9479c261d65eecedd3d9582f7f0f89c}} 
UART\+\_\+\+Handle\+Type\+Def {\bfseries huart2}
\item 
\mbox{\Hypertarget{main_8c_a8b893859891afe33d4bba72ba06fd381}\label{main_8c_a8b893859891afe33d4bba72ba06fd381}} 
uint8\+\_\+t {\bfseries prompt} \mbox{[}$\,$\mbox{]} =\char`\"{}user@Nucleo-\/STM32\+G474$>$$>$\char`\"{}
\begin{DoxyCompactList}\small\item\em Mise en page de l\textquotesingle{}affichage console. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{main_8c_a835573497a60b314a9bf5a6fcac9602a}{started}} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em Message de bienvenue. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a98a2c452a5e7053154e9f49a4cad4e98}\label{main_8c_a98a2c452a5e7053154e9f49a4cad4e98}} 
uint8\+\_\+t {\bfseries newline} \mbox{[}$\,$\mbox{]} =\char`\"{}\textbackslash{}r\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Mise en page de l\textquotesingle{}affichage console. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a25205e7c6d817620c1d9f7351a817a04}\label{main_8c_a25205e7c6d817620c1d9f7351a817a04}} 
uint8\+\_\+t {\bfseries cmd\+Not\+Found} \mbox{[}$\,$\mbox{]} =\char`\"{}Command not found\textbackslash{}r\textbackslash{}n\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Retour d\textquotesingle{}erreur. \end{DoxyCompactList}\item 
const uint8\+\_\+t \mbox{\hyperlink{main_8c_a3369aa142a6ea1e89e677006836ee2ff}{help}} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em Liste des commandes disponibles. \end{DoxyCompactList}\item 
const uint8\+\_\+t \mbox{\hyperlink{main_8c_ac88f7e9fb5c08068a71fdf0108918291}{pinout}} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em Liste des pin utilisées pour le montage. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_ab4dddec8f8c4bd0f8564a9463d491f1b}\label{main_8c_ab4dddec8f8c4bd0f8564a9463d491f1b}} 
const uint8\+\_\+t {\bfseries start} \mbox{[}$\,$\mbox{]} =\char`\"{}Power ON\textbackslash{}r\textbackslash{}n\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Retour d\textquotesingle{}information utilisateur. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a1e7598c1060bef0d150f2130fd460b31}\label{main_8c_a1e7598c1060bef0d150f2130fd460b31}} 
const uint8\+\_\+t {\bfseries stop} \mbox{[}$\,$\mbox{]} =\char`\"{}Power OFF\textbackslash{}r\textbackslash{}n\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Retour d\textquotesingle{}information utilisateur. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a8a309abfee51b09908c8c73447d07734}\label{main_8c_a8a309abfee51b09908c8c73447d07734}} 
const uint8\+\_\+t {\bfseries speed\+\_\+msg} \mbox{[}$\,$\mbox{]} =\char`\"{}speed set\+\_\+\+Ok\char`\"{}
\begin{DoxyCompactList}\small\item\em Retour d\textquotesingle{}information utilisateur. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_aa172f651f8d3a4de9c8864e23eb3324e}\label{main_8c_aa172f651f8d3a4de9c8864e23eb3324e}} 
int {\bfseries speed} \mbox{[}SPEED\+\_\+\+MAX\+\_\+\+DIGIT\mbox{]}
\begin{DoxyCompactList}\small\item\em Buffer contenant les digits de la commande de vitesse moteur. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a9d8a518124b90c249458a5b30ab36c52}\label{main_8c_a9d8a518124b90c249458a5b30ab36c52}} 
uint32\+\_\+t {\bfseries uart\+Rx\+Received}
\begin{DoxyCompactList}\small\item\em Flag de réception d\textquotesingle{}un caractère. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a2542ac6d4440b9e1c4a6435c55c79df3}\label{main_8c_a2542ac6d4440b9e1c4a6435c55c79df3}} 
uint8\+\_\+t {\bfseries uart\+Rx\+Buffer} \mbox{[}\mbox{\hyperlink{main_8c_a5bdd6772c246436bb14377095de79b31}{UART\+\_\+\+RX\+\_\+\+BUFFER\+\_\+\+SIZE}}\mbox{]}
\begin{DoxyCompactList}\small\item\em Définition du buffer de reception. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{main_8c_a3f98e2db2fa0d8f0cfd87b887576207f}\label{main_8c_a3f98e2db2fa0d8f0cfd87b887576207f}} 
uint8\+\_\+t {\bfseries uart\+Tx\+Buffer} \mbox{[}\mbox{\hyperlink{main_8c_a05f5d709605c6317c97e4974bec3402a}{UART\+\_\+\+TX\+\_\+\+BUFFER\+\_\+\+SIZE}}\mbox{]}
\begin{DoxyCompactList}\small\item\em Définition du buffer de transmission. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\+: Main program body 

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
Copyright (c) 2022 STMicroelectronics. All rights reserved.

This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-\/\+IS.

Modifications \+: Baptiste Cottu, Diego Jaimes 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{main_8c_a840291bc02cba5474a4cb46a9b9566fe}\label{main_8c_a840291bc02cba5474a4cb46a9b9566fe}} 
\index{main.c@{main.c}!main@{main}}
\index{main@{main}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



The application entry point. Fonction de gestion de l\textquotesingle{}interface utilisateur \+: gestion du shell et du traitement des commandes. 


\begin{DoxyRetVals}{Return values}
{\em int} & \\
\hline
\end{DoxyRetVals}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{main_8c_a3369aa142a6ea1e89e677006836ee2ff}\label{main_8c_a3369aa142a6ea1e89e677006836ee2ff}} 
\index{main.c@{main.c}!help@{help}}
\index{help@{help}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{help}{help}}
{\footnotesize\ttfamily const uint8\+\_\+t help\mbox{[}$\,$\mbox{]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n Help : Liste des commandes"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n pinout : Affiche toutes les broches connectées et leur fonction"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n start : Allume l'étage de puissance du moteur"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n stop : Eteind l'étage de puissance du moteur"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n Toute autre commande renverra un message d'erreur\(\backslash\)r\(\backslash\)n\(\backslash\)n"{}}}

\end{DoxyCode}


Liste des commandes disponibles. 

\mbox{\Hypertarget{main_8c_ac88f7e9fb5c08068a71fdf0108918291}\label{main_8c_ac88f7e9fb5c08068a71fdf0108918291}} 
\index{main.c@{main.c}!pinout@{pinout}}
\index{pinout@{pinout}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{pinout}{pinout}}
{\footnotesize\ttfamily const uint8\+\_\+t pinout\mbox{[}$\,$\mbox{]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\textcolor{stringliteral}{"{} \(\backslash\)r\(\backslash\)n PC13 : User button"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n PA5 : User led"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n PC3 : ISO\_reset\(\backslash\)r\(\backslash\)n\(\backslash\)n"{}}}

\end{DoxyCode}


Liste des pin utilisées pour le montage. 

\mbox{\Hypertarget{main_8c_a835573497a60b314a9bf5a6fcac9602a}\label{main_8c_a835573497a60b314a9bf5a6fcac9602a}} 
\index{main.c@{main.c}!started@{started}}
\index{started@{started}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{started}{started}}
{\footnotesize\ttfamily uint8\+\_\+t started\mbox{[}$\,$\mbox{]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n| Welcome on Nucleo-\/STM32G474 |"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*"{}}}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}}

\end{DoxyCode}


Message de bienvenue. 

